<script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
<script src="//cdn.rawgit.com/donmccurdy/aframe-extras/v6.0.0/dist/aframe-extras.min.js"></script>
<script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="components/follow.js"></script>
<script src="components/robobehavior.js"></script>
<script src="https://rawgit.com/protyze/aframe-curve-component/master/dist/aframe-curve-component.min.js"></script>
<script src="https://rawgit.com/protyze/aframe-alongpath-component/master/dist/aframe-alongpath-component.min.js"></script>
<style>
    #countdown{
        position: absolute;
        top:0;
        left:10px;
    }
</style>
<script>


    var timeleft = 3;
    var downloadTimer = setInterval(function(){
        $("#countdown").text(timeleft);
        timeleft -= 1;
        if(timeleft <= 0){
            let el  = document.querySelector('#source');
            el.setAttribute('alongpath',{curve:'#track1', dur:5000, rotate:true});
            clearInterval(downloadTimer);
        }
    }, 1000);
</script>
<body style='margin : 0px; overflow: hidden;'>
<div id="countdown"></div>
<a-scene embedded arjs='sourceType: webcam;'>
    <a-assets>
        <a-asset-item id="man" src="data/RobotExpressive.glb"></a-asset-item>
    </a-assets>
    <a-curve id="track1">
        <a-curve-point position="5.5 0.5 -15"></a-curve-point>
        <a-curve-point position="4.5 0.5 -18"></a-curve-point>
        <a-curve-point position="2.5 1.5 -20"></a-curve-point>
        <a-curve-point position="0 0 -10"></a-curve-point>
    </a-curve>



    <a-entity id="source" behavior gltf-model="#man" rotation="0 -90 0" scale="0.2 0.2 0.2" position="5.5 0.5 -15" animation-mixer="clip:Idle"></a-entity>

    <!--    <a-box id="target" position='0 0 -10' material='opacity: 1; color:red'></a-box>-->
<!--    <a-box position='5.5 0.5 -15' material='opacity: 1; color:red'></a-box>-->
<!--    <a-box position='4.5 0.5 -18' material='opacity: 1; color:blue'></a-box>-->
<!--    <a-box position='2.5 1.5 -20' material='opacity: 1; color:green'></a-box>-->


    <a-entity camera></a-entity>
</a-scene>
</body>